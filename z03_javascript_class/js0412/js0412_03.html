<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="http://code.jquery.com/jquery-latest.min.js"></script>
    <!-- <script src="js/main.js"></script> -->
    <link rel="stylesheet" type="text/css" href="css/main.css">
    <title>내가해보기</title>
    
    <script>
        $(function(){
            let no = [1,2,3,4,5,6,7,8,9,10];
            let name = ['홍길동','유관순','이순신','김구','강감찬','김유신','홍길순','홍길자','최현묵','이규원'];
            let kor = [76,91,81,99,61,82,63,80,64,55];
            let eng = [60,75,58,56,96,85,59,58,98,65];
            let math = [73,88,56,61,77,69,76,65,68,81];
            let total = [209,254,195,216,234,236,198,203,230,201];
            let avg = [69.6,84.6,65,72.6,78,78.7,66,67,76.6,67];

            let htmlData ="";
            for(i=0;i<no.length;i++){
                htmlData += "<tr id="+(i+1)+">";
                htmlData += "<td><input type='checkbox' name='stu' class='stuChk' value="+(i+1)+"></td>";
                htmlData += "<td>"+no[i]+"</td>";
                htmlData += "<td>"+name[i]+"</td>";
                htmlData += "<td>"+kor[i]+"</td>";
                htmlData += "<td>"+eng[i]+"</td>";
                htmlData += "<td>"+math[i]+"</td>";
                htmlData += "<td>"+total[i]+"</td>";
                htmlData += "<td>"+avg[i]+"</td>";
                htmlData += "<td>0</td>";
                htmlData += "<td><button class='delBtn'>삭제</button></td>";
                htmlData += "</tr>";
                };
            $("#body").html(htmlData); // 티바디 삽입

//----------------------------------------------최 초 실 행 -----------------------------------------
            
            $("#writeBtn").click(function(){
                $(".p_all").css("display","block");
            });

            $("#cancelBtn").click(function(){
                $(".p_all").css("display","none");
            });


            $("#confirmBtn").click(function(){
                let i_no = Math.max.apply(null,no)+1
                no.push(i_no);
                let i_name = $("#name").val();
                let i_kor = Number($("#kor").val());
                let i_eng = Number($("#eng").val());
                let i_math = Number($("#math").val());
                let i_total = i_kor+i_eng+i_math;
                let i_avg = (i_total/3).toFixed(2);
                let i_rank = 0;
                
                let htmlData = "";
                htmlData += "<tr id="+i_no+"></tr>";
                htmlData += "<td><input type='checkbox' name='stuChk' value="+i_no+"</td>";
                htmlData += "<td>"+i_no+"</td>";
                htmlData += "<td>"+i_name+"</td>";
                htmlData += "<td>"+i_kor+"</td>";
                htmlData += "<td>"+i_eng+"</td>";
                htmlData += "<td>"+i_math+"</td>";
                htmlData += "<td>"+i_total+"</td>";
                htmlData += "<td>"+i_avg+"</td>";
                htmlData += "<td>0</td>";
                htmlData += "<td><button class='delBtn'>삭제</button></td>";
            $("#body").append(htmlData);

            // 초기화
            $("#name").val("");
            $("#kor").val("");
            $("#eng").val("");
            $("#math").val("");
            $(".p_all").css("display","none");
            }); // 학생입력누름




            $("#allChk").click(function(){
                if($(this).is(":checked")==true){
                    console.log("전체선택");
                    $(".stuChk").each(function(){
                        $(this).prop("checked",true);
                    });
                }else{
                    console.log("전체해제");
                    $(".stuChk").each(function(){
                        $(this).prop("checked",false);
                    });
                };
            }); // allchk

            $(document).on("click",".delBtn",function(){
                if(confirm("ㄹㅇ 삭제??")){
                    $("#"+$(this).parent().parent().attr("id")).remove();
                }
            }); //delbtn WLs

            /*
            $(".delBtn").click(function(){
                console.log($(this).parent().parent().attr("id"));
                if(confirm("삭제실행")){
                    $("#"+$(this).parent().parent().attr("id")).remove();
                };
            }); // delbtn*/
            
            $("#deleteBtn").click(function(){
                if($(".stuChk:checked").length<1){
                    alert("선택항목없음"); 
                    return false;
                };
                if(!confirm("삭제 ㄱㄱ?")){
                    return false;
                }
                $(".stuChk").each(function(){
                    if($(this).is(":checked")==true){
                        $("#"+$(this).parent().parent().attr("id")).remove();
                    };
                });
            }); // 하단 삭제버턴

            

        });// jq

    </script>
</head>
<body>
    <section id="main">
        <h2>학생성적프로그램</h2>
        <table>
            <colgroup>
                <col width="8%">
                <col width="8%">
                <col width="*">
                <col width="8%">
                <col width="8%">
                <col width="8%">
                <col width="12%">
                <col width="12%">
                <col width="12%">
                <col width="10%">
            </colgroup>
            <thead>
                <tr>
                    <th><input type="checkbox" name="allChk" id="allChk" value="allChk"></th>
                    <th>학번</th>
                    <th>이름</th>
                    <th>국어</th>
                    <th>영어</th>
                    <th>수학</th>
                    <th>합계</th>
                    <th>평균</th>
                    <th>등수</th>
                    <th class="delBtn">삭제</th>
                </tr>
            </thead>
            <tbody id="body"></tbody>
        </table>
        <div id="button">
            <button id="writeBtn">학생입력</button>
            <button id="modifyBtn">학생수정</button>
            <button id="deleteBtn">학생삭제</button>
            <button id="searchBtn">학생검색</button>
        </div>
    </section>

    <div class="p_all">
        <div class="p_main">
            <h2>학생성적입력</h2>
            <form action="#" name="frm" method="get">
                <table>
                    <colgroup>
                        <col width="150px">
                        <col width="400px">
                    </colgroup>
                    <tr>
                        <th>이름</th>
                        <td><input type="text" name="name" id="name"></td>
                    </tr>
                    <tr>
                        <th>국어점수</th>
                        <td><input type="text" name="name" id="kor"></td>
                    </tr>
                    <tr>
                        <th>영어점수</th>
                        <td><input type="text" name="name" id="eng"></td>
                    </tr>
                    <tr>
                        <th>수학점수</th>
                        <td><input type="text" name="name" id="math"></td>
                    </tr>
                    <tr>
                        <td id="in_btn" colspan="2">
                            <button type="button" id="confirmBtn">확인</button>
                            <button type="button" id="cancelBtn">취소</button>
                        </td>
                    </tr>
                </table>
            </form>
        </div>
    </div>
</body>
</html>